<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <title>VIBORAL FUNDICIÓN — Calculadora</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <main class="page">
        <header class="topbar">
            <div class="brand">
                <!-- reemplaza por la imagen que adjuntaste: logo-cobra.png -->
                <img src="logo-cobra.png" alt="Logo Cobra" class="logo-image" width="56" height="56" loading="lazy">
                <div>
                    <div class="title">GESTOR DE PAGOS</div>
                    <div class="subtitle">VIBORAL FUNDICIÓN</div>
                </div>
            </div>
            <button id="refresh-btn" class="btn icon-btn" title="Actualizar precio" aria-label="Actualizar precio">
                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"><polyline points="23 4 23 10 17 10"/><polyline points="1 20 1 14 7 14"/><path d="M3.51 9a9 9 0 1 1 0 6"/></svg>
            </button>
        </header>

        <section class="panel">
            <div id="usdt-info" class="price-card result">Cargando precio USDT...</div>

            <div class="cards">
                <div id="vecinos" class="vecinos"></div>
                <div id="total" class="result total-card"></div>
            </div>

            <div id="error" class="error" style="display:none;"></div>
        </section>

        <footer class="footer">
            <small>&copy; 2025 SLOWLYM — USDT → VES</small>
        </footer>
    </main>

    <script src="app.js"></script>

    <!-- micro-script: enlaza el botón de refrescar con la función existente obtenerPrecioUSDT()
         añade la animación visual al actualizar -->
    <script>
    (function(){
        const btn = document.getElementById('refresh-btn');
        const info = document.getElementById('usdt-info');
        if (!btn || !info) return;
        btn.addEventListener('click', () => {
            // pulso visual en el botón
            btn.classList.add('btn-press');
            setTimeout(()=>btn.classList.remove('btn-press'), 220);

            // animación de actualización en la tarjeta de precio
            info.classList.remove('price-update');
            // forzar reflow para reiniciar la animación
            void info.offsetWidth;
            info.classList.add('price-update');

            // llamar a la función definida en app.js
            if (typeof obtenerPrecioUSDT === 'function') {
                obtenerPrecioUSDT();
            } else {
                // si app.js aún no se ha cargado o tiene otro nombre, refresca la página
                console.warn('obtenerPrecioUSDT no encontrada');
            }
        });
    })();
    </script>
</body>
</html>